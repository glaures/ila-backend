<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }
        .course-assignment {
            margin: 15px 0;
            padding: 12px;
            border-left: 4px solid #007bff;
            background-color: #f8f9fa;
        }
        .course-time {
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }
        .course-name {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .course-details {
            margin: 5px 0;
            font-size: 0.95em;
        }
        .preference-info {
            color: #28a745;
            font-style: italic;
            margin-top: 5px;
        }
        .warning {
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            color: #856404;
        }
        .warning strong {
            color: #d9534f;
        }
        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
<p>
    Hallo <span th:text="${user.firstName}">Vorname</span>,<br/>
    <br/>
    die Vergabe der iLA-Kurse ist abgeschlossen.<br/>
    Wir haben uns bemüht, Dir möglichst die Kurse zuzuweisen, die Du in Deinen
    Präferenzlisten oben hattest. Bitte bedenke aber, dass dies aufgrund von teilweise
    sehr beliebten Kursen nicht immer möglich ist.
</p>

<!-- Warnung bei unerwarteter Anzahl von Kursen -->
<div th:if="${assignments.size() != 3}" class="warning">
    <strong>⚠ Hinweis:</strong>
    <span th:if="${assignments.size() < 3}">
            Dir wurden nur <span th:text="${assignments.size()}">X</span> Kurse zugewiesen.
            Normalerweise sollten es 3 Kurse sein. Bitte melde Dich beim ILA-Team, damit wir das überprüfen können.
        </span>
    <span th:if="${assignments.size() > 3}">
            Dir wurden <span th:text="${assignments.size()}">X</span> Kurse zugewiesen.
            Normalerweise sollten es 3 Kurse sein. Bitte melde Dich beim ILA-Team, damit wir das überprüfen können.
        </span>
</div>

<h3>Deine Kurse für die Phase <span th:text="${period.name}">Phasenname</span>:</h3>

<div th:each="assignment : ${assignments}" class="course-assignment">
    <!-- Tag und Uhrzeit -->
    <div class="course-time">
        <span th:text="${assignment.dayOfWeekDisplay}">Montag</span>,
        <span th:text="${assignment.startTime}">14:00</span> -
        <span th:text="${assignment.endTime}">15:30</span> Uhr
    </div>

    <!-- Kursname -->
    <div class="course-name" th:text="${assignment.courseName}">Kursname</div>

    <!-- Kursbeschreibung -->
    <div class="course-details" th:if="${assignment.courseDescription != null && !assignment.courseDescription.isEmpty()}">
        <span th:text="${assignment.courseDescription}">Beschreibung</span>
    </div>

    <!-- Raum und Kursleiter -->
    <div class="course-details">
        <strong>Raum:</strong> <span th:text="${assignment.room ?: 'wird noch bekannt gegeben'}">Raum</span><br/>
        <strong>Kursleiter:</strong> <span th:text="${assignment.instructor}">Kursleiter</span>
    </div>

    <!-- Präferenzindex -->
    <div class="preference-info">
            <span th:if="${assignment.preferenceIndex != null}">
                ✓ Dies war Deine <span th:text="${assignment.preferenceIndex}">X</span>. Wahl für diesen Zeitblock
            </span>
        <span th:if="${assignment.preferenceIndex == null}">
                ℹ Dieser Kurs wurde Dir vom System zugewiesen (keine Präferenz angegeben)
            </span>
    </div>
</div>

<p style="margin-top: 30px;">
    <strong>Hinweis:</strong> Du kannst Dir diese Übersicht jederzeit im
    <a th:href="${ilaUrl}" th:text="${ilaUrl}">iLA-System</a> ansehen.
</p>

<div class="footer">
    <p>
        <strong>Wichtig:</strong> Sollten Dir Fehler auffallen oder hast Du Fragen zu Deinen Zuweisungen,
        melde Dich bitte umgehend beim ILA-Team.
    </p>
    <p>
        Herzliche Grüße,<br/>
        Das ILA-Orga-Team
    </p>
</div>
</body>
</html>